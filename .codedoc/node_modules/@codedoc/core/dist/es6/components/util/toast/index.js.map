{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/components/util/toast/index.tsx"],"names":[],"mappings":"AAEA,OAAO,EAAE,eAAe,EAAE,MAAM,MAAM,CAAC;AAEvC,OAAO,EAAE,UAAU,EAAE,MAAM,SAAS,CAAC;AACrC,OAAO,EAAE,UAAU,EAAE,MAAM,SAAS,CAAC;AAErC,OAAO,EAAE,IAAI,EAAE,MAAM,YAAY,CAAC;AASlC,MAAM,UAAU,KAAK,CAEnB,OAAqB,EACrB,QAAgC,EAChC,OAAY;IAEZ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IAC/C,MAAM,OAAO,GAAG,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC;IAE3C,MAAM,UAAU,GACd,yBAAK,KAAK,EAAE,OAAO,CAAC,SAAS,kBAAgB,OAAO;QAClD,yBAAK,KAAK,EAAE,OAAO,CAAC,KAAK;YACvB,yBAAK,KAAK,EAAE,OAAO,CAAC,OAAO,IAAG,OAAO,CAAO;YAC5C,yBAAK,KAAK,EAAE,OAAO,CAAC,OAAO;gBACxB,OAAO,CAAC,OAAO,IAAI,EAAE;gBACtB,4BAAQ,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE;oBAAE,gBAAC,IAAI,gBAAa,CAAS,CACtD,CACF,CACF,CAAC;IAET,MAAM,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtC,MAAM,IAAI,GAAG,GAAG,EAAE;QAChB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpB,MAAM,EAAE,CAAC;IACX,CAAC,CAAC;IACF,MAAM,MAAM,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,GAAG,CAAC,CAAC;IAEhE,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IAEjD,IAAI,CAAC,KAAK,CAAC;QACT,IAAI;YACF,UAAU,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YACrB,IAAI,CAAC,CAAC,gBAAgB,IAAI,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,yBAAyB,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE;gBAC/F,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;aACrC;YAED,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;YACxC,IAAI,OAAO,KAAK,CAAC,CAAC,EAAE;gBAClB,UAAU,CAAC,GAAG,EAAE;oBACd,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;wBACjB,IAAI,EAAE,CAAC;gBACX,CAAC,EAAE,OAAO,CAAC,CAAC;aACb;QACH,CAAC;KACF,CAAC,CAAC;IAEH,OAAO,UAAU,CAAC;AACpB,CAAC","sourcesContent":["import { RendererLike } from '@connectv/html';\nimport { ThemedComponentThis } from '@connectv/jss-theme';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { ToastStyle } from './style';\nimport { ToastSwipe } from './swipe';\nimport { CodedocTheme } from '../../../transport';\nimport { Icon } from '../../misc';\n\n\nexport interface ToastOptions {\n  actions?: any;\n  timeout?: number;\n}\n\n\nexport function Toast(\n  this: ThemedComponentThis<CodedocTheme>,\n  options: ToastOptions,\n  renderer: RendererLike<any, any>,\n  content: any\n) {\n  const classes = this.theme.classes(ToastStyle);\n  const visible = new BehaviorSubject(false);\n\n  const container$ = \n    <div class={classes.container} data-visible={visible}>\n      <div class={classes.toast}>\n        <div class={classes.content}>{content}</div>\n        <div class={classes.actions}>\n          {options.actions || ''}\n          <button onclick={() => hide()}><Icon>close</Icon></button>\n        </div>\n      </div>\n    </div>;\n\n  const show = () => visible.next(true);\n  const hide = () => {\n    visible.next(false);\n    remove();\n  };\n  const remove = () => setTimeout(() => container$.remove(), 150);\n\n  const swipe = new ToastSwipe(container$, remove);\n\n  this.track({\n    bind() {\n      setTimeout(show, 10);\n      if (!('backdropFilter' in container$.style) && !('-webkit-backdrop-filter' in container$.style)) {\n        container$.classList.add('no-blur');\n      }\n\n      const timeout = options.timeout || 3000;\n      if (timeout !== -1) {\n        setTimeout(() => {\n          if (!swipe.active())\n            hide();\n        }, timeout);\n      }\n    }\n  });\n\n  return container$;\n}\n"]}